Last updated: 2025-12-16

# Project Overview

## プロジェクト概要
- YM2151シンセサイザーのイベントログを編集するためのターミナルユーザーインターフェース (TUI) エディタです。
- JSON形式のイベントデータを読み込み、可視化、編集、保存する機能を提供します。
- イベントのタイミング調整、KeyON表示、時刻表示モードの切り替えにより、効率的なYM2151イベントデータ操作を支援します。

## 技術スタック
- フロントエンド: **ratatui** (0.29) - Rust製のターミナルUIフレームワークで、リッチなテキストベースのユーザーインターフェースを構築するために使用されています。
- フロントエンド: **crossterm** (0.29) - ターミナル操作のためのRustライブラリで、カーソル移動、キーイベント捕捉、画面クリアなど、低レベルなターミナル機能を提供します。
- 開発ツール: **Rust** (1.70以降) - 安全性、速度、並行性を重視したシステムプログラミング言語で、このプロジェクトの全体がRustで記述されています。
- ビルドツール: **Cargo** - Rustの公式パッケージマネージャー兼ビルドシステムで、プロジェクトの依存関係の管理、ビルド、テスト、ドキュメント生成を統合的に行います。
- 言語機能: **serde** (1.0) - Rustの強力なシリアライゼーション/デシリアライゼーションフレームワークで、様々なデータ形式との間でRustのデータ構造を変換します。
- 言語機能: **serde_json** (1.0) - `serde`のJSON実装で、JSON形式のYM2151イベントログデータの読み書きに使用されます。

## ファイル階層ツリー
```
📄 .gitignore
📄 Cargo.lock
📄 Cargo.toml
📖 IMPLEMENTATION_PLAN.md
📄 LICENSE
📖 README.ja.md
📖 README.md
📁 generated-docs/
🌐 googled947dc864c270e07.html
📁 src/
  📄 app.rs
  📄 main.rs
  📄 models.rs
  📄 ui.rs
📁 test_data/
  📊 minimal.json
  📊 sample.json
```

## ファイル詳細説明
- **`.gitignore`**: Gitバージョン管理システムが無視するファイルやディレクトリ（例: ビルド成果物、一時ファイル）を指定します。
- **`Cargo.lock`**: `Cargo.toml`で指定されたプロジェクトの依存関係の正確なバージョンを記録し、ビルドの再現性を保証します。
- **`Cargo.toml`**: プロジェクトのメタデータ（名前、バージョン、作者など）と、プロジェクトが依存する外部ライブラリ（クレート）を定義するファイルです。
- **`IMPLEMENTATION_PLAN.md`**: プロジェクトの詳細な実装計画、設計に関する考察、および将来的なロードマップについて記述されたドキュメントです。
- **`LICENSE`**: プロジェクトのオープンソースライセンス情報が記載されています。これにより、プロジェクトの利用、配布、変更の条件が明確にされます。
- **`README.ja.md`**: プロジェクトの概要、機能、インストール手順、使用方法、キーボード操作などを日本語で説明する主要なドキュメントです。
- **`README.md`**: プロジェクトの概要、機能、インストール手順、使用方法、キーボード操作などを英語で説明する主要なドキュメントです。
- **`generated-docs/`**: 自動生成されたドキュメントやレポートを格納するためのディレクトリです。
- **`googled947dc864c270e07.html`**: Googleサービスによるサイト所有権確認などのために配置されるファイルと考えられます。プロジェクトの主要な機能とは直接関連しません。
- **`src/app.rs`**: アプリケーションのコアロジックと状態管理を担当します。YM2151イベントログデータ、現在のUIモード、カーソル位置など、アプリケーション全体の状態を保持し、イベント処理によって状態を更新します。
- **`src/main.rs`**: プロジェクトのエントリーポイントです。ターミナルの初期化、アプリケーションの起動、キーイベントループの管理、UIの描画処理の呼び出し、終了時のクリーンアップなど、アプリケーション全体のライフサイクルを制御します。
- **`src/models.rs`**: YM2151イベント (`Ym2151Event`) やイベントログ (`Ym2151Log`) など、プロジェクトが扱う主要なデータ構造を定義します。これには、JSONシリアライゼーション/デシリアライゼーションのための実装も含まれます。
- **`src/ui.rs`**: `ratatui`ライブラリを使用して、ターミナルユーザーインターフェースの描画ロジックを実装します。アプリケーションの状態に基づいて、イベントログ、各種情報パネル、KeyON表示などを画面に表示します。
- **`test_data/minimal.json`**: アプリケーションのテストに使用される、最小限のYM2151イベントデータを含むJSONサンプルファイルです。
- **`test_data/sample.json`**: アプリケーションのテストやデモンストレーションに使用される、より複雑なYM2151イベントデータを含むJSONサンプルファイルです。

## 関数詳細説明
- **`main()`**: `src/main.rs`に定義されているアプリケーションのエントリーポイントです。ターミナル環境の初期設定、`App`構造体のインスタンス化、キーイベントループの実行、そしてアプリケーション終了時のリソース解放を行います。
- **`App::new(path: Option<PathBuf>) -> Result<App>`**: `src/app.rs`に定義されている、アプリケーションの新しいインスタンスを生成するコンストラクタ関数です。オプションでファイルパスを受け取り、指定されたJSONファイルからイベントログを読み込み、初期のアプリケーション状態を設定します。
- **`App::update(&mut self, event: Event) -> Result<bool>`**: `src/app.rs`に定義されている、アプリケーションの状態を更新する関数です。キーボードイベントなどの入力に応じて、イベントのナビゲーション、挿入、削除、待機時間の変更、時刻表示モードの切り替え、ファイルの保存といった操作を実行します。処理が終了する場合は`true`を返します。
- **`App::draw_ui(&mut self, frame: &mut Frame)`**: `src/app.rs`で呼び出され、`src/ui.rs`内の描画ロジックと連携して、現在のアプリケーションの状態をターミナル画面に描画する関数です。
- **`Ym2151Log::load_from_file(path: &Path) -> Result<Ym2151Log>`**: `src/models.rs`に定義されている、指定されたファイルパスからYM2151イベントログをJSON形式で読み込み、`Ym2151Log`構造体のインスタンスとして返す関数です。
- **`Ym2151Log::save_to_file(&self, path: &Path) -> Result<()>`**: `src/models.rs`に定義されている、現在の`Ym2151Log`インスタンスの内容を、指定されたファイルパスにJSON形式で保存する関数です。
- **`ui::render_log_editor(frame: &mut Frame, app: &App)`**: `src/ui.rs`に定義されている、現在のアプリケーションの状態 (`App`) に基づいて、YM2151イベントログの表示エリアを描画する関数です。KeyONイベントの特別表示や、累積時間/タイムスタンプモードの切り替え表示を扱います。

## 関数呼び出し階層ツリー
```
分析できませんでした。提供された情報からは具体的な関数呼び出し階層を生成できません。

---
Generated at: 2025-12-16 07:04:53 JST
